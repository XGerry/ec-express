extends templates/default

mixin tableRow(order)
	tr
		td
			a(href="/new-order?id="+order._id) 
				if order.invoiceNumber
					=order.invoiceNumber
				else if order.orderId
					=order.orderId
				else
					= "Not Saved to 3D Cart"
		td
			if (order.customer)
				=order.customer.firstname + ' ' + order.customer.lastname
			else
				| No Customer
		td=order.items.length
		td
			if (order.customer)
				if (order.customer.website == 'us')
					| U.S.
				else
					| Canada
			else
				| No Customer
		td=  moment(new Date(order.createdDate)).format('MMM Do, YYYY')

append head
	title List Orders
	script.
		$(document).ready(e => {
			$('#orderTable').DataTable({
				pageLength: 20,
				order: []
			})
		});

append nav-items-right
	li.nav-item
		a.btn.btn-outline-success(href="/new-order") New Order

append body
	.row
		.col-12
			table.table-hover.table#orderTable
				thead
					tr
						th Invoice Number
						th Customer Name
						th Items
						th Website
						th Created Date
				tbody
					each order in orders
						+tableRow(order)
mixin orderRow(order)
	tr(onclick="orderSelected('"+order._id+"', event)")
		td=order.orderId
		td=order.name
		td=moment(order.orderDate).format('MMM Do')
		td=order.cartOrder.BillingCompany
		td='$' + order.orderValue.toFixed(2)
		td=order.picked ? 'yes' : 'no'
		td
			if (order.batch)
				a(href="/batch-sheet?id="+order.batch target="_blank") View
		td=order.invoiced ? 'yes' : 'no'

doctype html
include mixins
html
	include includes/head
		title Order Overview
	body
		#wrapper
			+sidebarNav("orders")

			#page-content
				+menuToggle
				.starter-template
					h1 Orders
					p.lead View the orders in the database.

				.container
					.row
						.col
							table.table.table-striped.table-hover#orderTable
								thead
									tr
										th Order ID
										th Name
										th Date
										th Company
										th Value
										th Picked
										th Batch
										th Invoiced
								tbody
									each order in orders
										+orderRow(order)

		+footer
		script.
			$('#orderTable').DataTable({
				bDestroy: true,
				pageLength: 100,
				order: [[2, 'asc']]
			});

			function orderSelected(id, e) {
				if (e.target.localName != 'a') {
					window.location="/order?id="+id;
				}
			}
